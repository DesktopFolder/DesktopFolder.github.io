<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Piston Calculator</title>

    <script type="module">
        // As suggested by:
        // https://www.matuzo.at/blog/html-boilerplate/
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js');
    </script>

    <link rel="stylesheet" href="../styles.css">
    <!--<link rel="stylesheet" href="path/to/print.css" media="print">-->
    <link rel="stylesheet" href="styles.css">

    <meta name="description" content="A 3-way bedrock breaker piston and overhead calculator." />
    <meta property="og:title" content="Piston Calculator" />
    <meta property="og:site_name" content="DesktopFolder.github.io" />
    <meta property="og:description" content="A 3-way bedrock breaker piston and overhead calculator." />
    <meta property="og:image" content="https://cdn.discordapp.com/attachments/721171727673196605/823412989070671882/brbr.png" />
</head>

<body class="wider">
<div class="query-container">
    <input class="query" type="number" placeholder="0" id="chunks"> chunks and <input class="query" type="number" placeholder="0" id="blocks"> blocks.
</div>
<div class="query-container flex-vertical">
    <p id="output">(Top layer) 0 pistons required. ((0 + 0*16 + 46)^2) - 0 shulker boxes of redstone.</p>
    <p id="output-total">(5 layers) 0 pistons required. - 0 shulker boxes of redstone.</p>
</div>

<script>
function fivelayers(diameter) {
    var l1 = (diameter + 46)**2;
    var l5 = (diameter)**2;
    var l4 = (diameter + 18) * (diameter + 5);
    var l3 = (diameter + 23) * (diameter + 23);
    var l2 = (diameter + 41) * (diameter + 28);
    return l1 + l2 + l3 + l4 + l5;
}

function shulkers(blocks) {
    return blocks / (64*27);
}

function recalculate() {
    console.log("Recalculating.");
    var o = document.getElementById("output");
    var chunks = parseInt(document.getElementById("chunks").value) || 0;
    var blocks = parseInt(document.getElementById("blocks").value) || 0;
    var thecalc = "((" + blocks + " + " + chunks + "*16 + 46)^2)";
    var total = (blocks + chunks*16 + 46)**2;
    o.innerHTML = "(1 layer) " + total + " pistons required. " + thecalc + " - " + shulkers(total) + " shulker boxes of redstone.";

    var o2 = document.getElementById("output-total");
    var l5 = fivelayers(blocks + chunks * 16);
    o2.innerHTML = "(5 layers) " + l5 + " pistons required. - " + shulkers(l5) + " shulker boxes of redstone.";
}

function onDomLoaded() {
    document.getElementById("chunks").addEventListener("change", function() {
        recalculate();
    });
    document.getElementById("blocks").addEventListener("change", function() {
        recalculate();
    });
}

document.addEventListener('DOMContentLoaded', onDomLoaded, false);
</script>
</body>

</html>
